# React 理念

## 前言

- react是用js构建快速响应的大型web应用的首选方式

- 关键是实现快速响应，那么制约快速响应的因素是什么
    - CPU的瓶颈
    - IO的瓶颈

## CPU的瓶颈

- 当项目变的庞大，组件数量过多时 就容易遇到CPU的瓶颈

> 问题： 我们知道主流浏览器的刷新频率是60hz 即每16.6ms刷新一次 而浏览器的JS线程与GUI渲染线程互斥 JS线程执行时间过长是会阻碍GUI渲染线程的 当页面组件过多 js执行时间长了 那么久会造成卡顿

> 解决方法：
- 在浏览器的每一帧的时间中，预留一些时间给JS线程，React利用这部分时间更新组件（在源码中，预留的初始时间为5ms） 当预留的时间不够用的时候，React将线程控制权交还给浏览器使其有时间渲染UI React则等待下一帧时间到来继续执行被中断的工作
    - 这种将长任务拆分到每一帧中，一次执行一小段任务的操作，被称为时间切片

- 所以解决CPU瓶颈的关键是实现时间切片，而时间切片的关键是：将同步的更新变为可中断的异步更新

## IO瓶颈

> 问题： 网络延迟是前端开发者无法解决的。如何在网络延迟客观存在的情况下，减少用于对网络延迟的感知

> 解决办法：React给出的答案是将人机交互研究的结果整合到真实的UI中

- 当发出切换页面发出请求的时候，先在当前页面停留了一小段时间，这一小段时间被用来请求数据，当这一小段时间足够短时，用户是无感知的。如果请求时间超过一个范围再显示loading的效果

