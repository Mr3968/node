# 从输入URL到浏览器接受的过程中发生了什么事情

* 输入地址 
    - 当我们开始在浏览器中输入网址的时候，浏览器其实就已经在只能的匹配可能的url了，他会从历史记录，书签等地方，找到已经输入的字符串可能对应的url，然后给出的智能提示，让你可以补全url地址。对于chrome来说，他甚至会直接从缓存中吧网页显示出来，就是说，你还没有按下enter，页面就出来了

* 浏览查找域名IP
    - 请求一旦发起，浏览器首先要做的事情就是解析这个域名，一般来说，浏览器会首先查看本地硬盘的hosts文件，看看其中有没有和这个域名对应的规则，如果有的话就直接使用hosts文件里面的ip地址

    - 如果在本地的hosts文件没有能够找到对应的ip地址，浏览器会发出一个dns请求到本地的DNS服务器。本地DNS服务器一般都是在你的网络接入服务商提供（移动，联通等）
    
    - 查询你输入的网址的DNS请求到达本地DNS服务器之后，本地DNS服务器会首先查询它的缓存记录，如果缓存有此条记录，就可以直接返回结果，此过程是递归的方式进行查询。如果没有，本地DNS服务器还有想DNS根服务器进行查询

    - 根DNS服务器没有记录具体的域名和IP地址的对应关系，而是告诉本地DNS服务器，你可以带域服务器上去继续查询，并给出域服务器的地址，这种过程是迭代的过程

    - 本地DNS服务器继续向域服务器发出请求，在这个例子中，请求的对象是.com域服务器 .com域服务器收到请求后，也不会直接返回域名和IP地址的对应关系，而是告诉本地DNS服务器，你的域名的解析服务器的地址

    - 最后本地DNS服务器向域名的解析服务器发出请求，这时就能收到一个域名和IP地址的对应关系，本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问
    
* 浏览器向web服务器发送一个HTTP请求

    - 拿到域名对应IP地址之后，浏览器会以一个随机端口（1024 ~ 65535） 向服务器的web程序80端口发起TCP的链接请求 这个链接请求到达服务器端后，进入到网卡，然后是进入到内核的TCP/IP协议栈（用于识别该链接请求，解封包，一层一层的剥开），还有可能要经过Netfilter防火墙（属于内核的模块）的过滤，最终到达WEB程序，最终建立了TCP/IP的链接
    - 建立了TCP/IP连接之后，发起一个HTTP请求。 客户端向服务器发起http请求的时候，会有一些请求信息，请求信息包含三个部分
        - 请求方法URI协议版本
        - 请求头
        - 请求正文
