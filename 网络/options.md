# options

- 遇到这个问题的场景：

  - 在有的请求中 会莫名的多一次 method 为 options 的请求 但是在代码中并没有这个请求 那他为什么出现了？？？

- 原因：
  - 浏览器在某些请求中，在正式通信前会增加一次 HTTP 查询请求，称为‘预检’请求
  - 浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用那些 http 动词和头信息字段，只有在得到肯定的答复，浏览器才会发出正式的请求，否则就报错

# 浏览器将 CORS 请求分为两类

- 简单请求

- 非简单请求

- 浏览器在发送跨域请求的时候会判断一下是简单请求还是非简单请求

## 简单请求

- 先执行后判断是否跨域

- 定义：
  - 方法为： post/get/head 绝对不是 put 和 delete
  - Request header 里面（请求头）
    - 无自定义头
    - content-Type 为一下几种
      - text/plain
      - multipart/form-data
      - application/x-www-form-urlencoded

## 非简单请求

- 会先发一个命令，检查通过之后才会真正把跨域请求发出去

## 预检命令的缓存

- 非简单请求每次回发出两条请求，自然回影响我们的效率，HTTP 协议里面增加了一个响应头可以用来缓存我们的预检命令
  该响应头字段是 access-control-max-age 即靠苏浏览器在一个小时内可以缓存这段信息，不需要在发送预检命令
